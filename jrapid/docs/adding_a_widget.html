<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Martin C. Carlisle">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; U) [Netscape]">
   <title>Adding a new widget</title>
</head>
<body text="#000000" bgcolor="#C0C0FF" link="#0000FF" vlink="#800080" alink="#FF0080">

<center><b><font size=+3>Adding a new RAPID widget</font></b></center>

<p>This page will give you a step-by-step description of how to add a new
widget to RAPID, recompile it and generate a new version that can create
GUIs with your new widget.&nbsp; If you create a new widget, we'd appreciate
it if you'd share it with others.&nbsp; Send an email to&nbsp; <a href="mailto:carlislem@acm.org">Martin
Carlisle</a> so that your widget can be included in the next release.
<p>RAPID relies heavily on the object-oriented features of Ada 95 to reduce
code size.&nbsp; If you are unfamiliar with OO programming, you may want
to do some background reading before continuing.
<ol>
<li>
Copy the RAPID sources to a working directory.&nbsp; Since you will be
using RAPID to "bootstrap" itself (i.e. a large portion of the RAPID source
code is generated by RAPID itself), it is important to keep a clean backup
copy of the source code.</li>

<li>
Decide whether your widget will extend a previous widget, or be totally
new.&nbsp; Most widgets will probably descend from GUI_Widget directly;
however, on occasion, it is beneficial to have intermediate classes.&nbsp;
Buttons are a good example of this.&nbsp; Picture buttons and text buttons
share many properties, and so an abstract Button class is between these
and GUI_Widget.&nbsp; See gui-widget-button.ad[sb] for more detail.</li>

<li>
Add a name for your new widget to the Keyword enumeration type in gui_enum.ads</li>

<li>
Add a new "when" clause to the case statement in the function "Allocate_Widget"
in gui_enum.adb.&nbsp; This function allocates a widget of the appropriate
type based on the keyword. At this point, you will need to pick a name
for your new widget package.&nbsp; The convention is Gui.Widget.Widget_Type.Widget_Type.</li>

<li>
Add a "with" clause at the top of gui_enum.adb for your new package.</li>

<li>
Add a constant declaration for the new widget to Toolbar.ads</li>

<li>
Add an entry to Tool_Button_Widget_Names in Toolbar.adb</li>

<li>
Design a dialog for entering the widget properties using RAPID.&nbsp; Copying
one from another widget is a good place to start.</li>

<li>
Write your new widget package as a child of Gui.Widget.&nbsp; It is probably
easiest to copy another widget and modify it to fit your needs.&nbsp; 
<a href="gui_widget_implementation.html">Click
here</a> for more details.</li>

<li>
Design a picture to go on a button in RAPID.&nbsp; Make sure it is the
same size as label_gif.gif</li>

<li>
Open tool.gui using RAPID and add a button to the widget selection toolbar.&nbsp;
The action should be: Toolbar.Select_Widget.</li>

<br>&nbsp;</ol>

</body>
</html>

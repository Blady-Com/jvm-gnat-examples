<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Martin C. Carlisle">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (Win98; U) [Netscape]">
   <title>Creating a new Gui.Widget package</title>
</head>
<body text="#000000" bgcolor="#C0C0FF" link="#0000FF" vlink="#800080" alink="#FF0080">

<center><font size=+3>Creating a new Gui Widget package</font></center>

<p><br>
<ol>
<li>
Copy an old package to your new name:&nbsp; For example, when creating
Gui.Widget.Check_Button, I copied gui-widget-static.ad[bs] to gui-widget-check_button.ad[bs]</li>

<li>
In your new ads file, change the type declaration to have the attributes
of your new widget.&nbsp; The name, location and size of the widget will
be inherited from Gui_Widget.&nbsp; Also, change the package header and
change all references from the old type to the new type in the procedure
headers.</li>

<li>
In your adb file, you will reimplement all of the methods.&nbsp; Following
is a description of each method.</li>
</ol>
<b>Read_Widget</b>
<blockquote>Reads the information about a widget from a .gui file.&nbsp;
Implement by first doing a type-cast to the parent class and calling Read_Widget
(to get the attributes shared by the parent).&nbsp; Then, fill in the rest
of the attributes by reading them from the file.&nbsp; The File_Helpers
package provides a Get_String procedure that may be helpful.</blockquote>
<b>Write_Widget</b>
<blockquote>Writes the information about a widget to a .gui file.&nbsp;
First, use Gui_Enum.IO.Put to write the name of the widget to the file.&nbsp;
Then, as above, call the Write_Widget method from the parent class to write
the shared attributes.&nbsp; Write the unique attributes to the file.&nbsp;
If an attribute contains spaces, enclosing it in quotes will allow the
Read_Widget method to use File_Helpers.Get_String to read it in all at
once.&nbsp; If it also contains quotation marks, begin and end with quotation
marks, and use File_Helpers.Put_String to write the attribute.&nbsp; Always
end with a line feed (i.e. use a Put_Line or New_Line).&nbsp; Do not put
any line feeds in the middle of the widget.</blockquote>
<b>Generate_Widget_Creation</b>
<blockquote>This generates the code for creating the widget that will be
written when you compile a GUI.&nbsp; You are writing Ada code that will
be inside of the begin/end block of a procedure.&nbsp; If you need to declare
more variables, use a declare block.&nbsp; After you have written code
to generate the widget, call the parent method to generate code for things
common to all widgets.&nbsp; Be sure to attach actions, set colors, etc.
after creating the widget</blockquote>
<b>Generate_Widget_Context_Clause</b>
<blockquote>Generates a with statement for the appropriate package in the
Mcc.Gui hierarchy.</blockquote>
<b>Generate_Widget_Declaration</b>
<blockquote>Generates a variable declaration in the spec for this widget.</blockquote>
<b>Generate_Action_Context_Clause</b>
<blockquote>Generates a with statement for any actions associated with
the widget.&nbsp; For example, for a button, if when it is pushed, it calls
File_Menu.New_Choice, then a with for "File_Menu" is generated by this
method.</blockquote>
<b>Display_Widget</b>
<blockquote>This is Ada code that will display the widget from within RAPID
while you are editing a GUI.&nbsp; Do not implement any actions here (e.g.,
for a button, you do not want the button to do its action during editing,
only when it is compiled).</blockquote>
<b>Set_Properties</b>
<blockquote>This method fills in the editing dialog box with the values
from the widget.&nbsp; Again, the parent method is used to fill in some
of the values.&nbsp; It also sets fields in each widget so that some of
the work of setting and checking properties can be shared.&nbsp; These
fields point to the text entry widgets (or radio buttons or whatever) that
are used to edit these values.</blockquote>
<b>Check_Properties</b>
<blockquote>This procedure validates the inputs.&nbsp; As a convention,
we highlight the first bad thing and set Ok to false.&nbsp; The bell should
be rung if there is an error, but do not do this unless this is a leaf
in the inheritance tree (so that it doesn't get rung more than once).&nbsp;
The parent method checks shared properties.</blockquote>
<b>Apply_Properties</b>
<blockquote>Reads the values from the edit dialog and puts them in the
record.&nbsp; The parent method reads shared properties.</blockquote>
<b>Generate_Widget_Font, Undisplay_Widget, Highlight, Unhighlight, Move_Highlight,
Close_Properties</b>
<blockquote>Should be able to inherit these unchanged.</blockquote>

</body>
</html>
